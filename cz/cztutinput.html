<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=windows-1250">
  <link rel="stylesheet" type="text/css" href="tutor.css" >
  <link rel="stylesheet" type="text/css" href="colors.css" >
  <title>Jak se nauèit programovat: Konverzace s uivatelem</title>
</head>
<body>

<h2>Konverzace s uivatelem</h2>

<div class="whatcovered">
<p class="title">O èem si budeme povídat?</p>
<ul>
<li>Øekneme si, jak máme dát uivateli najevo, e má vloit data, a jak je
    mùeme pøeèíst poté, kdy je vloil.</li>
<li>Ukáeme si naèítání jak numerickıch dat, tak øetìzcù.</li>
<li>Zmíníme se o koncepci <em>stdin</em> a <em>stdout</em> <span 
    class="trnote" title="Poznámka&nbsp;pøekladatele">(zaøízení pro 
    standardní vstup a standardní vıstup)</span>.</li>
<li>Podíváme se na rozhraní s charakterem pøíkazového øádku a na to, 
    jak mùeme získat údaje, zapsané v podobì parametrù na pøíkazovém øádku 
    <span class="trnote" title="Poznámka&nbsp;pøekladatele">pøi spuštìní 
    programu</span>.</li>
</ul>

</div>

<p>Naše programy zatím pouívaly pouze statická data. Taková data jsme
mohli, pokud jsme to potøebovali, prozkoumat ještì pøed spuštìním programu,
take jsme program mohli napsat tak, aby jim vyhovoval. Ale vìtšina programù
taková není. Vìtšina programù oèekává, e budou øízeny uivatelem.
Pøinejmenším oèekávají, e jim uivatel sdìlí jakı soubor mají otevøít,
upravit jeho obsah a podobnì. Jiné programy si v kritickıch místech od
uivatele vyádají vstup dat. A právì to se v programování nazıvá
<em>uivatelskım rozhraním</em>. Návrhem a budováním uivatelského rozhraní
se v komerèních programech zabıvají specialisté, kteøí byli školeni v
oblastech styku èlovìka se strojem <span class="trnote"
title="Originální&nbsp;pojem">(human-machine interaction)</span> a
ergonomie. Bìnı programátor je takového luxusu ušetøen, take se musí øídit
citem a musí peèlivì zvaovat, jakım zpùsobem budou uivatelé program
pouívat.</p>

<p>Nejzákladnìjším rysem uivatelského rozhraní je zobrazování vıstupu. S
jeho nejprimitivnìjší formou jsme se ji seznámili v podobì pythonovského
pøíkazu <code>print</code> (a také v podobì funkce <code>write()</code>
jazyka JavaScript a v podobì dialogu <code>MsgBox</code> z jazyka VBScript).
Další krok v návrhu uivatelského rozhraní spoèívá v pøímém získávání
<em>vstupu</em> od uivatele. Nejjednodušší zpùsob, jak to zaøídit, spoèívá
v tom, e se program za bìhu na vstupní údaj zeptá. Druhı nejjednodušší
zpùsob vyaduje od uivatele, aby potøebné informace zadal pøi spuštìní
programu <span class="trnote" title="Poznámka&nbsp;pøekladatele">(jako
parametry programu)</span>. A koneènì se dostáváme i ke <em>grafickému
uivatelskému rozhraní</em> (GUI <span class="trnote"
title="Poznámka&nbsp;pøekladatele">= Graphical User Interface [grafikl júzr
interfejs]</span>) s rùznımi vstupními poli a dalšími prvky. V této èásti se
podíváme na první dvì metody. S programováním grafického uivatelského
rozhraní se seznámíme v této uèebnici a mnohem pozdìji, protoe jde o
problematiku vıraznì sloitìjší.</p>

<p>Pøi vyuití interaktivního reimu systému Python v oknì IDLE nebo v
terminálovém oknì operaèního systému si nyní ukáeme, jak lze od uivatele
získat data. Poté si ukáeme, jak lze toté provést pøímo z programu.
</p>



<h3>>>> print raw_input(u"Nìco napište: ")<sup class="trnote"><a
href="cztuttrn.html#Pinput_noascii" id="Binput_noascii" 
title="Poznámka k zápisu èeskıch øetìzcù s diakritikou">[1]</a></sup></h3>

<p class="trnote"><b>Poznámka pøekladatele:</b> Pøi pokusech s èeskımi texty
<em>v interaktivním reimu</em> mùete narazit na problémy. Pøi pokusech 
proto doporuèuji nepouívat øetìzce v kódování Unicode (viz pøedchozí odkaz na podrobnìjší
poznámku). V interaktivním reimu se radìji úplnì vyhnìte pouívání èeskıch znakù.
Pokud ovšem kód uloíte do souboru a dodríte pravidla pro práci s øetìzci v
kódování Unicode, mìly by programy korektnì fungovat.</p>

<p>Jak mùete pozorovat, <code>raw_input()</code> jednoduše zobrazí zadanou
<em>vızvu</em> &mdash; v našem pøípadì <code>"Nìco&nbsp;napište: "</code>
&mdash; a zachytí vše, co uivatel napíše jako odpovìï. Pøíkaz
<code>print</code> pak tuto odpovìï zobrazí. Odpovìï bychom ale mohli místo
zobrazení pøiøadit do promìnné:</p>

<pre>
>>> odpoved = raw_input(u"Jak se jmenuješ? ")
>>> print u"Tak ty se jmenuješ %s! Jsem rád, e jsem tì poznal." % odpoved
</pre>

<p>Pøíkaz <code>raw_input()</code> má bratrance jménem <code>input()</code>.
Rozdíl spoèívá v tom, e <code>raw_input()</code> sesbírá uivatelem napsané
znaky a chápe je jako textovı øetìzec, zatímco <code>input()</code> se z nich
bude snait vytvoøit èíslo. Pokud napøíklad uivatel napíše znaky
'<code>1</code>', '<code>2</code>' a '<code>3</code>', pak
<code>input</code> tyto tøi znaky pøeète a pøevede je na èíslo
<em>123</em>.</p>

<p>Pouijme nyní pøíkaz <code>input()</code> k tomu, aby uivatel rozhodl,
která tabulka násobkù se má tisknout:</p>

<pre>
nasobitel = input(u"Vyberte hodnotu násobitele: ")
for j in range(1, 13):
    print "%d x %d = %d" % (j, nasobitel, j * nasobitel)
</pre>

<p>Pouití pøíkazu <code>input</code> je naneštìstí velmi záludné. Je to dáno
tím, e <code>input()</code> se nesnaí vyhodnocovat jen èísla, ale snaí se
na libovolnı vstup pohlíet jako na kód v jazyce Python a snaí se jej
provést. To znamená, e by znalı uivatel se zákeønımi úmysly mohl napsat
pøíkaz jazyka Python, kterı by napøíklad vymazal nìjakı soubor na vašem PC! Z
tohoto dùvodu bude lepší, kdy se budete dret pøíkazu
<code>raw_input()</code> a vıslednı øetìzec si budete pøevádìt na potøebnı
datovı typ pouitím zabudovanıch konverzních funkcí jazyka Python. Je to v
podstatì velmi snadné:</p>

<pre>
>>> nasobitel = <b>int(</b>raw_input(u"Vyberte hodnotu násobitele: ")<b>)</b>
>>> for j in range(1, 13):
...    print "%d x %d = %d" % (j, nasobitel, j * nasobitel)
</pre>

<p>Vidíte? Volání <code>raw_input()</code> jsme jednoduše obalili voláním
<code>int()</code>. Efekt je stejnı, jako kdybychom pouili
<code>input()</code>, ale je to mnohem bezpeènìjší. Existují i jiné konverzní
funkce, take uivatelskı vstup mùete stejnì dobøe pøevádìt na reálná èísla a
na další typy.</p>

<p>Take co kdybychom si to vyzkoušeli v opravdovém programu? Vzpomínáte si na
pøíklady realizující adresáø lidí, které vyuívaly strukturu typu slovník?
Zabıvali jsme se jimi v rámci tématu <a href="cztutdata.html#addressbook"
>Data, datové typy a promìnné</a>. Podívejme se na tento pøíklad znovu, v
situaci, kdy ji známe cykly a umíme èíst vstup od uivatele.</p>

<pre>
<span class="comment"># Vytvoøíme prázdnı slovník pouívanı jako adresáø osob.</span>
adresy = {}

<span class="comment"># Naèítáme jeho poloky, dokud není zadán prázdnı øetìzec.</span>
print
jmeno = raw_input(u'Zadejte jméno (nic => konec): ')
while jmeno != '':
    polozka = raw_input(u'Zadejte ulici, mìsto, telefon (nic => konec): ')
    adresy[jmeno] = polozka
    jmeno = raw_input(u'Zadejte jméno (nic => konec): ')
    
<span class="comment"># Teï se budeme ptát, co se má zobrazit.</span>
jmeno = raw_input(u'Které jméno se má zobrazit? (nic = konec): ')
while jmeno != '':
    print jmeno + ':', adresy[jmeno]
    jmeno = raw_input(u'Které jméno se má zobrazit? (nic = konec): ')
</pre>

<p>Prozatím je to náš nejrozsáhlejší program. Uivatelské rozhraní je sice
trochu neuèesané, ale funguje. V dalších tématech uvidíme, jak je mùeme
vylepšit. U tohoto programu se zmiòme o jedné vìci, a sice o boolovském
testu v pøíkazu cyklu <code>while</code>. Podle jeho vısledku se urèuje, zda
chce uivatel ukonèit èinnost <span class="trnote"
title="Poznámka&nbsp;pøekladatele" >(zda se má ukonèit provádìní
cyklu)</span>. Povšimnìte si také, e datovou èást uchováváme v podobì
jednoho øetìzce, zatímco v pøíkladu v èásti <a
href="cztutdata.html#addressbook" >Data, datové typy a promìnné</a> jsme
informaci uchovávali v samostatnıch buòkách. Zatím jsme se toti nezabıvali
tím, jak bychom mohli øetìzec rozdìlit na nìkolik èástí. Dostaneme se k tomu
v pozdìjších tématech. S programem implementujícím adresáø osob se dále v
uèebnici ještì setkáme. Postupnì jej budeme upravovat do uiteènìjší podoby.
</p>

<h4>Vstup v jazyce VBScript</h4>

<p>V jazyce VBScript se vstup zadávanı uivatelem ète pøíkazem
<code>InputBox</code>. Mùeme psát:</p>

<pre>
&lt;script type="text/vbscript">
Dim vstup
vstup = InputBox("Zadejte své jméno") 
MsgBox ("Zadali jste: " &amp; vstup)
&lt;/script>
</pre>

<p>Funkce <code>InputBox()</code> zobrazí dialogové okno s textem vızvy a
s&nbsp;polem pro zadávání vstupu. Zadanı obsah tohoto pole získáme jako
návratovou hodnotu funkce. Pøi volání mùeme funkci navíc pøedat další
parametry, jako je napøíklad øetìzec zobrazovanı v titulku okna. Pokud
uivatel stiskne tlaèítko Storno (Cancel) vrací funkce prázdnı øetìzec
nezávisle na tom, co bylo zadáno do vstupního pole.</p>

<p>Následující pøíklad ukazuje implementaci adresáøe osob v jazyce
VBScript.</p>

<pre>
&lt;script type="text/vbscript">
Dim adresy, jmeno, polozka <span class="comment">' Vytvoøíme promìnné.</span>
Set adresy = CreateObject("Scripting.Dictionary")
jmeno = InputBox("Zadejte jméno", "Poloka adresáøe osob")
While jmeno &lt;&gt; ""
    polozka = InputBox("Zadejte detaily - ulice mìsto, telefon", "Poloka adresáøe osob")
    adresy.Add jmeno, polozka   <span class="comment">' Pøidej klíè a detaily.</span>
    jmeno = InputBox("Zadejte jméno", "Poloka adresáøe osob")
Wend

<span class="comment">' Teï se budeme ptát, co se má zobrazit.</span>
jmeno = InputBox("Zadejte jméno", "Zobrazení údaje z adresáøe osob")
While jmeno &lt;&gt; ""
   MsgBox(jmeno &amp; " - " &amp; adresy.Item(jmeno))
   jmeno = InputBox("Zadejte jméno", "Zobrazení údaje z adresáøe osob")
Wend
&lt;/script>
</pre>

<p>Základní struktura progamu se zcela shoduje s Pythonovskou verzí, a na
pár øádkù navíc. VBScript vyaduje, aby byly promìnné pøedem
deklarovány pøíkazem <code>Dim</code>. Kadı pøíkaz cyklu musí bıt navíc
ukonèen pøíkazem <code>Wend</code>.</p>

<h4 id="jscript">Ètení vstupu v jazyce JavaScript</h4>

<p>JavaScript pro nás pøedtavuje urèitou vızvu, protoe jde o jazyk, kterı
se pouívá pøedevším pro webovské prohlíeèe. Jako takovı nemá ádnı
speciální pøíkaz pro vstup. Místo toho mùeme èíst z HTML elementu
<code>form</code>. V prohlíeèi Internet Explorer mùeme pøípadnì pouít
technologii Active Scripting firmy Microsoft a nechat si zobrazit dialog
InputBox stejnì, jako jsme to udìlali v jazyce VBScript. Abychom se
seznámili s rùznımi monostmi, ukái zde techniku vyuívající HTML
formuláøe. Pokud vám pojem HTML formuláø nic neøíká, mùete nahlédnout do
referenèní pøíruèky HTML <span class="trnote"
title="Poznámka&nbsp;pøekladatele" >(<a
href="http://www.w3.org/TR/html4/interact/forms.html#edef-FORM">viz norma
HTML 4.01</a>)</span> nebo do nìjaké uèebnice, která jej vysvìtluje. Mùete
také jednoduše okopírovat to, co uvádím dále. Doufám, e vysvìtlování
vıznamu ani není tøeba. Slibuji, e se to budu snait naèrtnout co
nejjednodušším zpùsobem.</p>

<p>Základem struktury našeho pøíkladu v HTML bude javascriptovı kód vloenı
do funkce. Zatím jsme se s tím ještì nesetkali. Prozatím mùete detaily
kolem definice funkce ignorovat.</p>

<pre>
&lt;script type="text/javascript">
function mujProgram(){
    alert("Získali jsme hodnotu " + document.formular.pole.value);
}
&lt;/script>

&lt;form name='formular'>
&lt;p>Zadej hodnotu a potom klikni myší mimo vstupní pole&lt;/p>
&lt;input type='text' name='pole' onChange='mujProgram()'>
&lt;/form>
</pre>

<p>Program se skládá z jediného øádku, kterı zobrazí dialog
<code>alert</code> (velmi se podobá <code>MsgBox()</code> v jazyce
VBScript). V nìm se zobrazuje hodnota získaná ze vstupního pole. Ve
formuláøi je zobrazen vyzıvací text (uzavøenı do párovıch znaèek &lt;p> a
&lt;/p>) a vstupní pole. V kontextu dokumentu <code>document</code> má
formuláø jméno <code>formular</code>. Vstupní pole jsme pojmenovali
jednoduše <code>pole</code>. Na jeho hodnotu<span class="trnote"
title="Poznámka&nbsp;pøekladatele">, která byla vloena uivatelem,</span>
se tedy mùeme v javascriptovém programu odkázat takto:</p>

<pre>
document.formular.pole.value
</pre>

<p>Pøíklad implementace našeho adresáøe osob v JavaScript zde ukazovat
nebudu. Vzhledem k pouití v HTML bude vše o nìco sloitìjší a zvıší se i
èetnost pouívání funkcí. S pøíkladem tedy chci poèkat a do doby, kdy
potøebnou problematiku probereme v samostatnıch tématech.</p>


<div class="details">
<h4 id="stdin">Pár slov o <em>stdin</em> a <em>stdout</em></h4>

<p><b>Poznámka:</b> Slovem <em>stdin</em> se v poèítaèovém argonu oznaèuje
standardní vstupní zaøízení (obvykle klávesnice). Slovo <em>stdout</em> se
vztahuje ke standardnímu vıstupnímu zaøízení (obvykle k obrazovce). V
diskusích o programování se s termíny stdin a stdout setkáváme pomìrnì
èasto. Abychom mohli vyuít kód pro práci se soubory, je to zaøízeno tak, e
se stdin a stdout chovají jako soubory.</p>

<p>V systému Python jsou <em>stdin</em> a <em>stdout</em> souèástí modulu
<code>sys</code> a jmenují se <code>sys.stdin</code> a
<code>sys.stdout</code>. Funkce <code>raw_input()</code> pouívá automaticky
<em>stdin</em>, pøíkaz <code>print</code> pouívá zase <em>stdout</em>. Ze
standardního vstupu mùeme èíst a na standardní vıstup mùeme zapisovat také
pøímo. Má to urèité vıhody ve smyslu jemnìjšího øízení vstupu a vıstupu.
Uveïme si pøíklad ètení <span class="trnote"
title="Poznámka&nbsp;pøekladatele">jednoho øádku</span> ze standardního
vstupu:</p>

<pre>
import sys
print "Zadej hodnotu: ",       <span class="comment"># èárka zabrání pøechodu na další øádek</span>
hodnota = sys.stdin.readline() <span class="comment"># explicitní pouití stdin</span>
print hodnota
</pre>

<p>Funkènost se témìø shoduje s chováním pøíkazu:</p>

<pre>
print raw_input("Zadej hodnotu: ")
</pre>

<p>Vıhodou explicitního pouití <em>stdin</em> je to, e standardní vstup mùeme 
svázat se skuteènım souborem, take program svùj vstup nebude èíst z
klávesnice, ale z daného souboru. Tento obrat je uiteènı pøi realizaci
dlouhıch testù programu, kdy místo ruèního vkládání vstupních údajù v
okamiku, kdy je program poaduje, necháme vstup pøeèíst z pøedem
pøipraveného souboru. (Další vıhodou je v takovém pøípadì skuteènost, e
test mùeme spouštìt opakovanì, pøièem jsme si jisti, e vstup bude pokadé
stejnı, take by tomu mìl odpovídat stejnı vıstup. Tuto techniku opakovaného
spouštìní døívìjších testù, které mají ovìøit, e se nic nepokazilo,
programátoøi nazıvají <em>regresní testování</em>.)</p>
 
<p>Na závìr si ukame pøíklad pøímého vıstupu na standardní vıstupní
zaøízení <code>sys.stdout</code>. Tento vıstup mùe bıt rovnì pøesmìrován
do <span class="trnote" title="Poznámka&nbsp;pøekladatele">fyzického</span>
souboru. Funkènost pøíkazu <code>print</code> se pøiblinì shoduje s
funkèností následujícího zápisu:</p>

<pre>
sys.stdout.write("Ahoj, vy tam!\n") <span class="COMMENT"># \n = novı øádek</span>
</pre>

<p>V praxi tento obrat pouijeme hlavnì v pøípadech, kdy chceme obejít
vlastnost pøíkazu <code>print</code>, kterı vdy vkládá mezi vıstupní
hodnoty <span class="trnote" title="Poznámka&nbsp;pøekladatele"
>alespoò</span> mezeru. Pøi pouití <code>stdout</code> se tomu mùeme
vyhnout. Srovnejte obsah dvou øádkù na vıstupu následujícího pøíkladu:</p>

<pre>
import sys
for polozka in ['jedna', 'je', 1]: 
    print polozka,                      <span class="comment"># èárka potlaèí pøechod na novı øádek</span>
print 
for polozka in ['jedna', 'je', str(1)]: <span class="comment"># musíme explicitnì pøevést na øetìzec</span>
    sys.stdout.write(polozka)           <span class="comment"># zcela bez mezer!</span>
</pre>

<div class="trnote">
<p><b>Poznámka pøekladatele</b> &mdash; vıstup by mìl vypadat takto:</p>

<pre>
jedna je 1
jednaje1
</pre>

</div>

<p>Pokud pøedem víme, jak budou data vypadat, pak stejného vısledku mùeme
samozøejmì dosáhnout i pouitím formátovacího øetìzce. Ale pokud to nevíme,
pak je jednodušší jednoduše posílat vše na <code>stdout</code>, ne abychom
se snaili o generování sloitého formátovacího øetìzce za bìhu
programu.</p>


<h4>Pøesmìrování stdin a stdout</h4>

<p>Take jak vlastnì mùeme pøesmìrovat stdin a stdout <span class="trnote"
title="Poznámka&nbsp;pøekladatele">z&nbsp;a</span>&nbsp;do souborù? Mùeme
toho dosáhnout pøímo z našeho programu, kdy pouijeme bìné pythonovské
techniky pro práci se soubory (budeme se tím zabıvat za chvíli). Ale
nejjednodušší zpùsob spoèívá ve vyuití vlastností operaèního systému.</p>

<p>Vyzkoušejte si, jak funguje <span class="trnote"
title="Poznámka&nbsp;pøekladatele">jeden z pøíkazù</span> operaèního
systému, kdy na pøíkazovém øádku pøedepíšeme pøesmìrování:</p>

<pre>
C:\> dir
C:\> dir > dir.txt
</pre>

<p>První z pøíkazù vypíše obsah adresáøe na obrazovku, druhı jej zapíše do
souboru. Pouitím znaku '<code>></code>' programu øíkáme, e chceme
<code>stdout</code> pøesmìrovat do souboru <code>dir.txt</code>.</p>

<p>Toté bychom mohli udìlat s našim pythonovskım programem:</p>

<pre>
$ python mujprogram.py > vysledek.txt
</pre>

<p class="trnote"><b>Poznámka pøekladatele:</b> Vyzıvací znak
'<code>$</code>' v uvedeném pøíkladu napovídá, e jde o pouití v unixovém
systému (napøíklad v systému Linux). V systému MS&nbsp;Windows bychom to
udìlali úplnì stejnì.</p>

<p>Uvedenı zápis vede ke spuštìní <code>mujprogram.py</code>, ale jeho
vıstup by se místo na obrazovce objevil v souboru <code>vysledek.txt</code>.
Jeho obsah si poté mùeme prohlédnout prostøednictvím nìjakého textového
editoru.</p>

<p>K pøesmìrování <code>stdin</code> z nìjakého souboru jednoduše místo
znaku '<code>></code>' pouijeme znak '<code>&lt;</code>'. Následuje úplnı
pøíklad. Nejdøíve vytvoøíme soubor <code>opisvstupu.py</code> a vloíme do
nìj následující zdrojovı text:</p>

<pre>
import sys
vstup = sys.stdin.readline()
while vstup.strip() != '':
    print vstup
    vstup = sys.stdin.readline()
</pre>

<p class="note"><b>Poznámka:</b> Metoda <code>strip()</code> odsekne znak,
kterı reprezentuje pøechod na novı øádek. Ten je souèástí naèítaného øádku
ze stdin. Pøíkaz <code>raw_input()</code> by to udìlal za vás.</p>

<p class="trnote"><b>Poznámka pøekladatele:</b> Metoda <code>strip()</code>
ve skuteènosti odstraòuje všechny <em>bílé znaky</em> (whitespaces) ze
zaèátku i z konce øetìzce. To znamená, e odstraní všechny úvodní a koncové
mezery, tabulátory a znaky pøechodu na novı øádek. Pøi pouití metody
<code>readline()</code> ovšem mùeme získat øetìzec, ve kterém se znak
pøechodu na novı øádek vyskytuje jenom jednou a vdy zcela na konci.</p>

<p>Teï si to mùeme vyzkoušet spuštìním z pøíkazového øádku:</p>

<pre>
$ python opisvstupu.py
</pre>

<p>Vısledkem by mìl bıt program, kterı vše opisuje na vıstup, dokud nezadáte
prázdnı øádek.</p>

<p>Teï si vytvoøte jednoduchı textovı soubor nazvanı <code>vstup.txt</code>,
kterı bude obsahovat pár øádkù textu. Spuste program znovu a pøesmìrujte do
nìj vstup ze souboru <code>vstup.txt</code>:</p>

<pre>
$ python opisvstupu.py &lt; vstup.txt
</pre>

<p>Python opisuje na vıstup vše, co našel v souboru <code>vstup.txt</code>.
Vzpomínáte si, e jsme si øekli, e pøíkaz <code>print</code> a standardní
funkce <code>raw_input()</code> ve skuteènosti vnitønì pracují se stdin a
stdout? To znamená, e v pøíkladu <code>opisvstupu.py</code> mùeme práci se
stdin nahradit voláním <code>raw_input()</code> následovnì:</p>

<pre>
vstup = raw_input()
while vstup != '':
    print vstup
    vstup = raw_input()
</pre>

<p>... co je ve vìtšinì pøípadù mnohem jednodušší.</p>

<p>Postupnım pøesmìrováním vstupu z více rùznıch souborù mùeme rychle a
snadno otestovat chování našich programù v rùznıch situacích (napøíklad pøi
zadávání špatnıch hodnot nebo údajù špatného typu). Mùeme tak uèinit
opakovatelnım a spolehlivım zpùsobem. Techniku pøesmìrování mùeme pouít
také pøi zpracování velkıch objemù dat z pøipravenıch souborù. Pøitom se pøi
pouívání stejného programu nezbavujeme monosti ruèního vstupu dat v
pøípadech, kdy je objem dat malı. Mechanismus pøesmìrování stdin a stdout
pøedstavuje pro programátora velmi uiteènı trik. Zkoušejte a uvidíte sami,
jaká další pouití se vám podaøí najít.</p>

<p>V systému Windows se vyskytuje známá chyba, která se projevuje pøi
pøesmìrování vstupu. Pokud svùj program spustíte prostım uvedením jména
skriptu, místo abyste pøed nìj explicitnì napsali <code>python</code>, nebudou
Windows vypisovat vısledky v konzolovém oknì! Na <a
href="http://support.microsoft.com/default.aspx?scid=kb;en-us;321788"
target="_blank">webové stránce firmy Microsoft</a> naleznete popis zásahu do
registry, kterı tuto chybu opravuje. Ani tento popis však není zcela korektní.
Musíte se dívat pod <code>HKEY_CURRENT_USER</code> a ne pod
<code>HKEY_LOCAL_MACHINE</code>, jak vám radí zmínìnı dokument. Pokud
pracujete s pøesmìrováním vstupu nebo vıstupu, pak radìji uveïte pøímé
spuštìní programu <code>python</code>. [Dìkuji Timu Graberovi, kterı si
uvedeného problému všimnul, a Timu Petersovi, kterı mi prozradil onu opravu
zásahem do registry.]</p>

</div>


<h3>Parametry z pøíkazového øádku</h3>

<p>Další typ vstupu pøedstavuje vstup zadanı z pøíkazového øádku. Dejme
tomu, e nìjak takto spustíte svùj textovı editor z pøíkazového øádku:</p>

<pre>
$ EDIT Foo.txt
</pre>

<p>Operaèní systém spustí program nazvanı EDIT a pøedá mu jméno souboru,
kterı se má editovat &mdash; v našem pøípadì <code>Foo.txt</code>. Ale jak
si editor pøeète jméno souboru?</p>

<p>Ve vìtšinì jazykù systém poskytuje pole nebo seznam øetìzcù, které
obsahují slova z pøíkazového øádku. Take první prvek bude obsahovat jméno
pøíkazu, druhı prvek bude obsahovat první argument, atd. Nìkdy máme k
dispozici další magickou promìnnou (èasto je pojmenována <code>argc</code> z
anglického <em>argument count</em> &mdash; poèet argumentù), ve které je
uloen poèet prvkù uvedeného seznamu.</p>

<p>V systému Python je zmínìnı seznam souèástí modulu <code>sys</code> a
nazıvá se <code>argv</code> (z anglického <code>arg</code>ument
<code>v</code>alues, èili hodnoty argumentù). V Pythonu nepotøebujeme znát
hodnotu <code>argc</code>, protoe <span class="trnote"
title="Poznámka&nbsp;pøekladatele">poèet pøedanıch argumentù</span> mùeme
zjistit jako délku (poèet prvkù) seznamu <code>argv</code> pomocí standardní
funkce <code>len()</code>. Vìtšinou nepotøebujeme dìlat ani to, protoe
prùchod celım seznamem mùeme pøedepsat pythonovskım cyklem <code>for</code>
takto:</p>

<pre>
import sys
for polozka in sys.argv:
    print polozka
    
print u'První argument byl:', sys.argv[1]
</pre>

<p>Poznamenejme, e to bude fungovat jen v pøípadì, kdy uvedenı kód uloíte
do souboru (dejme tomu <code>args.py</code>) a spustíme jej z pøíkazového
øádku operaèního systému, napøíklad takto:</p>

<pre>
C:\Python\Projekty> python args.py 1 23 fred
args.py
1
23
fred
První argument byl: 1
C:\Python\Projekty>
</pre>

<h3>VBScript a JavaScript</h3>

<p>Tyto jazyky jsou urèeny pro tvorbu webovıch stránek, take monost naèítání
parametrù zadanıch na pøíkazovém øádku u nich nepøipadá v úvahu. Pokud bychom
je pouívali v prostøedí Microsoft <a href="cztutfunc.html#wsh">Windows Script
Host</a>, situace by se zmìnila. WHS nabízí monost extrakce tìchto argumentù
z objektu <code>WshArguments</code>, kterı je naplnìn v dobì bìhu.</p>

<p>A to je k tématu uivatelského vstupu opravdu vše, co budeme v této
uèebnici potøebovat. Je to sice velmi primitivní, ale pøesto s tím vystaèíte
pøi psaní uiteènıch programù. V poèátcích systému Unix nebo u prvních
osobních poèítaèù pøedstavovala tato podoba interakce s uivatelem jedinou
dostupnou monost. V programech s grafickım uivatelskım rozhraním mùeme
samozøejmì vstup naèítat také. K tomu, jak se to dìlá, se ale v této
uèebnici dostaneme mnohem pozdìji.</p>


<div class="remember">
<p class="title">Zapamatujte si</p>
<ul>

<li>Pro ètení èísel mùeme pouít <code>input</code>, pro ètení znakù èi
øetìzcù pouijeme <code>raw_input</code>.</li>

<li>Jak pøíkaz <code>input</code> tak <code>raw_input</code> mohou zobrazit
øetìzec s vızvou pro uivatele.</li>

<li>Parametry z pøíkazového øádku mùeme získat ze seznamu
<code>argv</code>, kterı v systému Python mùeme importovat z modulu
<code>sys</code>. První prvek seznamu obsahuje jméno programu.</li>

</ul>
</div>

<div class="foot">
<p class="navig">[ 
<a href="cztutstyle.html" title="Pøidejme trochu stylu">pøedchozí</a> |
<a href="cztutcont.html">obsah</a> | 
<a href="cztutbranch.html" title="Vìtvení">další</a> 
]</p>
<p class="note">Pokud vás napadne, co by se dalo na pøekladu této kapitoly
vylepšit, zašlete e-mail odklepnutím

<script type="text/javascript">
var id = new String('$Id: cztutinput.html,v 1.13 2005/09/03 13:07:56 petr Exp $');
var ma = new String('prikryl at skil dot cz');
ma = ma.replace(/ at /, '@');
ma = ma.replace(/ dot /, '.');
document.write('<a href="mailto:' + ma + '?subject=JNP2:%20poznamka' 
               + '&body=Dokument:%20' + id.replace(/\s/g, '%20') 
               + '%0d%0dPoznámky:%0d" '
               + 'title="Tento odkaz spustí váš program pro zasílání pošty."'
               + '>tohoto odkazu<' + '/a>.');
</script> 

Tím budou do dopisu automaticky vloeny informace o tomto HTML dokumentu.</p>

<p class="cvs">$Id: cztutinput.html,v 1.13 2005/09/03 13:07:56 petr Exp $</p>
</div>
</body>
</html>

